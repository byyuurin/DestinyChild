(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-010fb3ec"],{"02f4":function(t,n,e){var i=e("4588"),r=e("be13");t.exports=function(t){return function(n,e){var s,a,o=String(r(n)),c=i(e),u=o.length;return c<0||c>=u?t?"":void 0:(s=o.charCodeAt(c),s<55296||s>56319||c+1===u||(a=o.charCodeAt(c+1))<56320||a>57343?t?o.charAt(c):s:t?o.slice(c,c+2):a-56320+(s-55296<<10)+65536)}}},"0390":function(t,n,e){"use strict";var i=e("02f4")(!0);t.exports=function(t,n,e){return n+(e?i(t,n).length:1)}},"0bfb":function(t,n,e){"use strict";var i=e("cb7c");t.exports=function(){var t=i(this),n="";return t.global&&(n+="g"),t.ignoreCase&&(n+="i"),t.multiline&&(n+="m"),t.unicode&&(n+="u"),t.sticky&&(n+="y"),n}},"0dac":function(t,n,e){"use strict";e.r(n);var i=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"narrative"},[e("div",{staticClass:"container"},[e("h2",{staticClass:"page-title"},[e("a",{attrs:{href:t.setting.link,target:"_blank"}},[t._v(t._s(t.setting.title))])]),e("div",{staticClass:"event-info",class:{"event-end":t.isEventEnd}},[e("div",{staticClass:"profile"},[e("div",{staticClass:"banner"},[e("a",{staticClass:"btn btn-prev",on:{click:function(n){t.changeShowIndex(-1)}}}),e("a",{staticClass:"btn btn-next",on:{click:function(n){t.changeShowIndex(1)}}}),e("img",{attrs:{src:t.setting.banner}})]),e("div",{staticClass:"event-period"},[e("strong",[t._v("活動期間")]),t._v(" "+t._s(t.setting.eventStart)+" -\r\n          "+t._s(t.setting.eventEnd)+"\r\n        ")]),e("div",{staticClass:"boost-options"},[e("strong",[t._v("Boost")]),e("select",{directives:[{name:"model",rawName:"v-model",value:t.boost,expression:"boost"}],on:{change:function(n){var e=Array.prototype.filter.call(n.target.options,function(t){return t.selected}).map(function(t){var n="_value"in t?t._value:t.value;return n});t.boost=n.target.multiple?e:e[0]}}},t._l(t.setting.boost,function(n){return e("option",{domProps:{value:n}},[t._v("\r\n              "+t._s(n-100)+"%\r\n            ")])}),0)]),e("div",{staticClass:"expected-info"},[e("div",{staticClass:"expected-round"},[e("strong",[t._v("期望值(1回)")]),t._v(" "+t._s(t.expectedReward(1))+"\r\n          ")]),e("div",{staticClass:"expected-day"},[e("strong",[t._v("期望值(1日)")]),t._v(" "+t._s(t.expectedReward(t.setting.freeReset))+"\r\n          ")]),e("div",{staticClass:"expected-all"},[e("strong",[t._v("期望值("+t._s(t.eventDays)+"日)")]),t._v("\r\n            "+t._s(this.expectedReward(t.setting.freeReset*t.eventDays))+"\r\n          ")])])]),e("div",{staticClass:"schedule"},[e("table",[e("thead",[e("tr",[e("th",[t._v("目標值")]),t._l(t.setting.rewardTarget,function(n){return e("th",[t._v("\r\n                "+t._s(t._f("numberWithComma")(n))+"\r\n              ")])})],2)]),e("tbody",t._l(t.dayList,function(n,i){return e("tr",{class:{highlight:t.isToday(n)}},[e("td",[t._v(t._s(n))]),t._l(t.setting.rewardTarget,function(n){return e("td",[t._v("\r\n                "+t._s(t._f("numberWithComma")(t.minReward(i+1,n)))+"\r\n              ")])})],2)}),0)])])])])])},r=[],s=(e("6b54"),e("a481"),e("cadf"),e("551c"),e("097d"),{name:"narrative",data:function(){return{boost:100,settings:[],showIndex:0}},computed:{setting:function(){var t=this.settings[this.showIndex]||{};return t.banner&&(t.banner=t.banner.replace("http://","https://")),console.log(t),t},eventDays:function(){if(!this.setting)return 0;var t=new Date(this.setting.eventStart),n=new Date(this.setting.eventEnd);return Math.ceil((n-t)/1e3/60/60/24)},dayList:function(){var t=[];if(this.setting)for(var n=new Date(this.setting.eventStart),e=0;e<this.eventDays;e++){var i=new Date(n.getTime()+1e3*e*60*60*24);t.push(i.toLocaleDateString())}return t},remainingDays:function(){if(!this.setting)return 0;var t=new Date(this.setting.eventEnd),n=new Date;return Math.ceil((t-n)/1e3/60/60/24)},isEventEnd:function(){return this.remainingDays<0}},methods:{expectedReward:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;if(!this.setting.reward)return 0;for(var n=this.setting.reward.length,e=0,i=0;i<n;i++){var r=i+1,s=this.setting.reward[i],a=this.setting.maxFreeBox;if(r===n){for(var o={normal:0,boss:0},c=this.setting.boxReward.normal.length,u=0,l=0;l<c;l++){var v=void 0,f=void 0;v=this.setting.boxReward.normal[l],f=this.setting.boxRewardOdds.normal[l],o.normal+=v*f*a,v=this.setting.boxReward.boss[l],f=this.setting.boxRewardOdds.boss[l],o.boss+=v*f*a}u+=o.normal*(n-1),u+=o.boss,e+=s+u}else e+=s}return Math.floor(e*t*this.boost)/100},minReward:function(t,n){var e=n/this.eventDays;return Math.round(e*t)},isToday:function(t){var n=new Date,e=new Date(t);return n.setHours(0),n.setMinutes(0),n.setSeconds(0),n.setMilliseconds(0),e-n===0},changeShowIndex:function(t){var n=this.showIndex+t,e=this.settings.length;n>=e&&(n=e-1),n<0&&(n=0),this.showIndex!==n&&(this.boost=100),this.showIndex=n}},filters:{numberWithComma:function(t){var n=/(-?\d+)(\d{3})/,e=t.toString();while(n.test(e))e=e.replace(n,"$1,$2");return e}},created:function(){var t=this;fetch("./api/narrative.json").then(function(t){return t.json()}).then(function(n){t.settings=n,t.showIndex=n.length-1})},watch:{showIndex:function(){this.boost=100}}}),a=s,o=(e("ea81"),e("2877")),c=Object(o["a"])(a,i,r,!1,null,"33a5ac56",null);c.options.__file="index.vue";n["default"]=c.exports},"214f":function(t,n,e){"use strict";e("b0c5");var i=e("2aba"),r=e("32e9"),s=e("79e5"),a=e("be13"),o=e("2b4c"),c=e("520a"),u=o("species"),l=!s(function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")}),v=function(){var t=/(?:)/,n=t.exec;t.exec=function(){return n.apply(this,arguments)};var e="ab".split(t);return 2===e.length&&"a"===e[0]&&"b"===e[1]}();t.exports=function(t,n,e){var f=o(t),h=!s(function(){var n={};return n[f]=function(){return 7},7!=""[t](n)}),g=h?!s(function(){var n=!1,e=/a/;return e.exec=function(){return n=!0,null},"split"===t&&(e.constructor={},e.constructor[u]=function(){return e}),e[f](""),!n}):void 0;if(!h||!g||"replace"===t&&!l||"split"===t&&!v){var p=/./[f],d=e(a,f,""[t],function(t,n,e,i,r){return n.exec===c?h&&!r?{done:!0,value:p.call(n,e,i)}:{done:!0,value:t.call(e,n,i)}:{done:!1}}),b=d[0],_=d[1];i(String.prototype,t,b),r(RegExp.prototype,f,2==n?function(t,n){return _.call(t,this,n)}:function(t){return _.call(t,this)})}}},3846:function(t,n,e){e("9e1e")&&"g"!=/./g.flags&&e("86cc").f(RegExp.prototype,"flags",{configurable:!0,get:e("0bfb")})},"520a":function(t,n,e){"use strict";var i=e("0bfb"),r=RegExp.prototype.exec,s=String.prototype.replace,a=r,o="lastIndex",c=function(){var t=/a/,n=/b*/g;return r.call(t,"a"),r.call(n,"a"),0!==t[o]||0!==n[o]}(),u=void 0!==/()??/.exec("")[1],l=c||u;l&&(a=function(t){var n,e,a,l,v=this;return u&&(e=new RegExp("^"+v.source+"$(?!\\s)",i.call(v))),c&&(n=v[o]),a=r.call(v,t),c&&a&&(v[o]=v.global?a.index+a[0].length:n),u&&a&&a.length>1&&s.call(a[0],e,function(){for(l=1;l<arguments.length-2;l++)void 0===arguments[l]&&(a[l]=void 0)}),a}),t.exports=a},"5f1b":function(t,n,e){"use strict";var i=e("23c6"),r=RegExp.prototype.exec;t.exports=function(t,n){var e=t.exec;if("function"===typeof e){var s=e.call(t,n);if("object"!==typeof s)throw new TypeError("RegExp exec method returned something other than an Object or null");return s}if("RegExp"!==i(t))throw new TypeError("RegExp#exec called on incompatible receiver");return r.call(t,n)}},"6b54":function(t,n,e){"use strict";e("3846");var i=e("cb7c"),r=e("0bfb"),s=e("9e1e"),a="toString",o=/./[a],c=function(t){e("2aba")(RegExp.prototype,a,t,!0)};e("79e5")(function(){return"/a/b"!=o.call({source:"a",flags:"b"})})?c(function(){var t=i(this);return"/".concat(t.source,"/","flags"in t?t.flags:!s&&t instanceof RegExp?r.call(t):void 0)}):o.name!=a&&c(function(){return o.call(this)})},"8c48":function(t,n,e){},a481:function(t,n,e){"use strict";var i=e("cb7c"),r=e("4bf8"),s=e("9def"),a=e("4588"),o=e("0390"),c=e("5f1b"),u=Math.max,l=Math.min,v=Math.floor,f=/\$([$&`']|\d\d?|<[^>]*>)/g,h=/\$([$&`']|\d\d?)/g,g=function(t){return void 0===t?t:String(t)};e("214f")("replace",2,function(t,n,e,p){return[function(i,r){var s=t(this),a=void 0==i?void 0:i[n];return void 0!==a?a.call(i,s,r):e.call(String(s),i,r)},function(t,n){var r=p(e,t,this,n);if(r.done)return r.value;var v=i(t),f=String(this),h="function"===typeof n;h||(n=String(n));var b=v.global;if(b){var _=v.unicode;v.lastIndex=0}var y=[];while(1){var x=c(v,f);if(null===x)break;if(y.push(x),!b)break;var m=String(x[0]);""===m&&(v.lastIndex=o(f,s(v.lastIndex),_))}for(var E="",S=0,D=0;D<y.length;D++){x=y[D];for(var I=String(x[0]),k=u(l(a(x.index),f.length),0),$=[],M=1;M<x.length;M++)$.push(g(x[M]));var C=x.groups;if(h){var T=[I].concat($,k,f);void 0!==C&&T.push(C);var j=String(n.apply(void 0,T))}else j=d(I,f,k,$,C,n);k>=S&&(E+=f.slice(S,k)+j,S=k+I.length)}return E+f.slice(S)}];function d(t,n,i,s,a,o){var c=i+t.length,u=s.length,l=h;return void 0!==a&&(a=r(a),l=f),e.call(o,l,function(e,r){var o;switch(r.charAt(0)){case"$":return"$";case"&":return t;case"`":return n.slice(0,i);case"'":return n.slice(c);case"<":o=a[r.slice(1,-1)];break;default:var l=+r;if(0===l)return r;if(l>u){var f=v(l/10);return 0===f?r:f<=u?void 0===s[f-1]?r.charAt(1):s[f-1]+r.charAt(1):r}o=s[l-1]}return void 0===o?"":o})}})},b0c5:function(t,n,e){"use strict";var i=e("520a");e("5ca1")({target:"RegExp",proto:!0,forced:i!==/./.exec},{exec:i})},ea81:function(t,n,e){"use strict";var i=e("8c48"),r=e.n(i);r.a}}]);
//# sourceMappingURL=chunk-010fb3ec.22d5a3a5.js.map