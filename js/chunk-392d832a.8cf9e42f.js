(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-392d832a"],{"0dac":function(t,e,n){"use strict";n.r(e);var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"narrative"},[n("div",{staticClass:"container"},[n("h2",{staticClass:"page-title"},[n("a",{attrs:{href:t.setting.link,target:"_blank"}},[t._v(t._s(t.setting.title))])]),n("div",{staticClass:"event-info",class:{"event-end":t.isEventEnd}},[n("div",{staticClass:"profile"},[n("div",{staticClass:"banner"},[n("a",{staticClass:"btn btn-prev",on:{click:function(e){t.changeShowIndex(-1)}}}),n("a",{staticClass:"btn btn-next",on:{click:function(e){t.changeShowIndex(1)}}}),n("img",{attrs:{src:t.setting.banner}})]),n("div",{staticClass:"event-period"},[n("strong",[t._v("活動期間")]),t._v(" "+t._s(t.setting.eventStart)+" -\n          "+t._s(t.setting.eventEnd)+"\n        ")]),n("div",{staticClass:"boost-options"},[n("strong",[t._v("Boost")]),n("select",{directives:[{name:"model",rawName:"v-model",value:t.boost,expression:"boost"}],on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.boost=e.target.multiple?n:n[0]}}},t._l(t.setting.boost,(function(e){return n("option",{domProps:{value:e}},[t._v("\n              +"+t._s(e-100)+"%\n            ")])})),0)]),n("div",{staticClass:"expected-info"},[n("div",{staticClass:"expected-round"},[n("strong",[t._v("期望值(1回)")]),t._v(" "+t._s(t.expectedReward(1))+"\n          ")]),n("div",{staticClass:"expected-day"},[n("strong",[t._v("期望值(1日)")]),t._v(" "+t._s(t.expectedReward(t.setting.freeReset))+"\n          ")]),n("div",{staticClass:"expected-all"},[n("strong",[t._v("期望值("+t._s(t.eventDays)+"日)")]),t._v("\n            "+t._s(this.expectedReward(t.setting.freeReset*t.eventDays))+"\n          ")])])]),n("div",{staticClass:"schedule"},[n("table",[n("thead",[n("tr",[n("th",[t._v("目標值")]),t._l(t.setting.rewardTarget,(function(e){return n("th",[t._v("\n                "+t._s(t._f("numberWithComma")(e))+"\n              ")])}))],2)]),n("tbody",t._l(t.dayList,(function(e,s){return n("tr",{class:{highlight:t.isToday(e)}},[n("td",[t._v(t._s(e))]),t._l(t.setting.rewardTarget,(function(e){return n("td",[t._v("\n                "+t._s(t._f("numberWithComma")(t.minReward(s+1,e)))+"\n              ")])}))],2)})),0)])])])])])},i=[],a=(n("6b54"),n("a481"),{name:"narrative",data:function(){return{boost:100,settings:[],showIndex:0}},computed:{setting:function(){var t=this.settings[this.showIndex]||{};return t.banner&&(t.banner=t.banner.replace("http://","https://")),t},eventDays:function(){if(!this.setting)return 0;var t=new Date(this.setting.eventStart),e=new Date(this.setting.eventEnd);return Math.ceil((e-t)/1e3/60/60/24)},dayList:function(){var t=[];if(this.setting)for(var e=new Date(this.setting.eventStart),n=0;n<this.eventDays;n++){var s=new Date(e.getTime()+1e3*n*60*60*24);t.push(s.toLocaleDateString())}return t},remainingDays:function(){if(!this.setting)return 0;var t=new Date(this.setting.eventEnd),e=new Date;return Math.ceil((t-e)/1e3/60/60/24)},isEventEnd:function(){return this.remainingDays<0}},methods:{expectedReward:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;if(!this.setting.reward)return 0;for(var e=this.setting.reward.length,n=0,s=0;s<e;s++){var i=s+1,a=this.setting.reward[s],r=this.setting.maxFreeBox;if(i===e){for(var o={normal:0,boss:0},c=this.setting.boxReward.normal.length,d=0,l=0;l<c;l++){var u=void 0,v=void 0;u=this.setting.boxReward.normal[l],v=this.setting.boxRewardOdds.normal[l],o.normal+=u*v*r,u=this.setting.boxReward.boss[l],v=this.setting.boxRewardOdds.boss[l],o.boss+=u*v*r}d+=o.normal*(e-1),d+=o.boss,n+=a+d}else n+=a}return Math.floor(n*t*this.boost)/100},minReward:function(t,e){var n=e/this.eventDays;return Math.round(n*t)},isToday:function(t){var e=new Date,n=new Date(t);return e.setHours(0),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0),n-e===0},changeShowIndex:function(t){var e=this.showIndex+t,n=this.settings.length;e>=n&&(e=n-1),e<0&&(e=0),this.showIndex!==e&&(this.boost=100),this.showIndex=e}},filters:{numberWithComma:function(t){var e=/(-?\d+)(\d{3})/,n=t.toString();while(e.test(n))n=n.replace(e,"$1,$2");return n}},created:function(){var t=this;fetch("./api/narrative.json").then((function(t){return t.json()})).then((function(e){t.settings=e,t.showIndex=e.length-1}))},watch:{showIndex:function(){this.boost=100}}}),r=a,o=(n("d9b1"),n("2877")),c=Object(o["a"])(r,s,i,!1,null,"6026cc5f",null);e["default"]=c.exports},3846:function(t,e,n){n("9e1e")&&"g"!=/./g.flags&&n("86cc").f(RegExp.prototype,"flags",{configurable:!0,get:n("0bfb")})},"690f":function(t,e,n){},"6b54":function(t,e,n){"use strict";n("3846");var s=n("cb7c"),i=n("0bfb"),a=n("9e1e"),r="toString",o=/./[r],c=function(t){n("2aba")(RegExp.prototype,r,t,!0)};n("79e5")((function(){return"/a/b"!=o.call({source:"a",flags:"b"})}))?c((function(){var t=s(this);return"/".concat(t.source,"/","flags"in t?t.flags:!a&&t instanceof RegExp?i.call(t):void 0)})):o.name!=r&&c((function(){return o.call(this)}))},d9b1:function(t,e,n){"use strict";var s=n("690f"),i=n.n(s);i.a}}]);
//# sourceMappingURL=chunk-392d832a.8cf9e42f.js.map