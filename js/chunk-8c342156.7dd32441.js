(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8c342156"],{"0dac":function(t,n,e){"use strict";e.r(n);var s=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"narrative"},[e("div",{staticClass:"container"},[e("h2",{staticClass:"page-title"},[e("a",{attrs:{href:t.setting.link,target:"_blank"}},[t._v(t._s(t.setting.title))])]),e("div",{staticClass:"event-info",class:{"event-end":t.isEventEnd}},[e("div",{staticClass:"profile"},[e("div",{staticClass:"banner"},[e("a",{staticClass:"btn btn-prev",on:{click:function(n){t.changeShowIndex(-1)}}}),e("a",{staticClass:"btn btn-next",on:{click:function(n){t.changeShowIndex(1)}}}),e("img",{attrs:{src:t.setting.banner}})]),e("div",{staticClass:"event-period"},[e("strong",[t._v("活動期間")]),t._v(" "+t._s(t.setting.eventStart)+" -\r\n          "+t._s(t.setting.eventEnd)+"\r\n        ")]),e("div",{staticClass:"boost-options"},[e("strong",[t._v("Boost")]),e("select",{directives:[{name:"model",rawName:"v-model",value:t.boost,expression:"boost"}],on:{change:function(n){var e=Array.prototype.filter.call(n.target.options,function(t){return t.selected}).map(function(t){var n="_value"in t?t._value:t.value;return n});t.boost=n.target.multiple?e:e[0]}}},t._l(t.setting.boost,function(n){return e("option",{domProps:{value:n}},[t._v("\r\n              +"+t._s(n-100)+"%\r\n            ")])}),0)]),e("div",{staticClass:"expected-info"},[e("div",{staticClass:"expected-round"},[e("strong",[t._v("期望值(1回)")]),t._v(" "+t._s(t.expectedReward(1))+"\r\n          ")]),e("div",{staticClass:"expected-day"},[e("strong",[t._v("期望值(1日)")]),t._v(" "+t._s(t.expectedReward(t.setting.freeReset))+"\r\n          ")]),e("div",{staticClass:"expected-all"},[e("strong",[t._v("期望值("+t._s(t.eventDays)+"日)")]),t._v("\r\n            "+t._s(this.expectedReward(t.setting.freeReset*t.eventDays))+"\r\n          ")])])]),e("div",{staticClass:"schedule"},[e("table",[e("thead",[e("tr",[e("th",[t._v("目標值")]),t._l(t.setting.rewardTarget,function(n){return e("th",[t._v("\r\n                "+t._s(t._f("numberWithComma")(n))+"\r\n              ")])})],2)]),e("tbody",t._l(t.dayList,function(n,s){return e("tr",{class:{highlight:t.isToday(n)}},[e("td",[t._v(t._s(n))]),t._l(t.setting.rewardTarget,function(n){return e("td",[t._v("\r\n                "+t._s(t._f("numberWithComma")(t.minReward(s+1,n)))+"\r\n              ")])})],2)}),0)])])])])])},i=[],a=(e("6b54"),e("a481"),e("cadf"),e("551c"),e("097d"),{name:"narrative",data:function(){return{boost:100,settings:[],showIndex:0}},computed:{setting:function(){var t=this.settings[this.showIndex]||{};return t.banner&&(t.banner=t.banner.replace("http://","https://")),t},eventDays:function(){if(!this.setting)return 0;var t=new Date(this.setting.eventStart),n=new Date(this.setting.eventEnd);return Math.ceil((n-t)/1e3/60/60/24)},dayList:function(){var t=[];if(this.setting)for(var n=new Date(this.setting.eventStart),e=0;e<this.eventDays;e++){var s=new Date(n.getTime()+1e3*e*60*60*24);t.push(s.toLocaleDateString())}return t},remainingDays:function(){if(!this.setting)return 0;var t=new Date(this.setting.eventEnd),n=new Date;return Math.ceil((t-n)/1e3/60/60/24)},isEventEnd:function(){return this.remainingDays<0}},methods:{expectedReward:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;if(!this.setting.reward)return 0;for(var n=this.setting.reward.length,e=0,s=0;s<n;s++){var i=s+1,a=this.setting.reward[s],o=this.setting.maxFreeBox;if(i===n){for(var r={normal:0,boss:0},c=this.setting.boxReward.normal.length,l=0,v=0;v<c;v++){var h=void 0,g=void 0;h=this.setting.boxReward.normal[v],g=this.setting.boxRewardOdds.normal[v],r.normal+=h*g*o,h=this.setting.boxReward.boss[v],g=this.setting.boxRewardOdds.boss[v],r.boss+=h*g*o}l+=r.normal*(n-1),l+=r.boss,e+=a+l}else e+=a}return Math.floor(e*t*this.boost)/100},minReward:function(t,n){var e=n/this.eventDays;return Math.round(e*t)},isToday:function(t){var n=new Date,e=new Date(t);return n.setHours(0),n.setMinutes(0),n.setSeconds(0),n.setMilliseconds(0),e-n===0},changeShowIndex:function(t){var n=this.showIndex+t,e=this.settings.length;n>=e&&(n=e-1),n<0&&(n=0),this.showIndex!==n&&(this.boost=100),this.showIndex=n}},filters:{numberWithComma:function(t){var n=/(-?\d+)(\d{3})/,e=t.toString();while(n.test(e))e=e.replace(n,"$1,$2");return e}},created:function(){var t=this;fetch("./api/narrative.json").then(function(t){return t.json()}).then(function(n){t.settings=n,t.showIndex=n.length-1})},watch:{showIndex:function(){this.boost=100}}}),o=a,r=(e("afb6"),e("2877")),c=Object(r["a"])(o,s,i,!1,null,"3be20abd",null);c.options.__file="index.vue";n["default"]=c.exports},3846:function(t,n,e){e("9e1e")&&"g"!=/./g.flags&&e("86cc").f(RegExp.prototype,"flags",{configurable:!0,get:e("0bfb")})},"51e8":function(t,n,e){},"6b54":function(t,n,e){"use strict";e("3846");var s=e("cb7c"),i=e("0bfb"),a=e("9e1e"),o="toString",r=/./[o],c=function(t){e("2aba")(RegExp.prototype,o,t,!0)};e("79e5")(function(){return"/a/b"!=r.call({source:"a",flags:"b"})})?c(function(){var t=s(this);return"/".concat(t.source,"/","flags"in t?t.flags:!a&&t instanceof RegExp?i.call(t):void 0)}):r.name!=o&&c(function(){return r.call(this)})},afb6:function(t,n,e){"use strict";var s=e("51e8"),i=e.n(s);i.a}}]);
//# sourceMappingURL=chunk-8c342156.7dd32441.js.map