(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-307ce8e5"],{"11e9":function(t,e,n){var r=n("52a7"),o=n("4630"),a=n("6821"),i=n("6a99"),c=n("69a8"),s=n("c69a"),l=Object.getOwnPropertyDescriptor;e.f=n("9e1e")?l:function(t,e){if(t=a(t),e=i(e,!0),s)try{return l(t,e)}catch(n){}if(c(t,e))return o(!r.f.call(t,e),t[e])}},"15b4":function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"library"},[t.openFilter?r("div",{staticClass:"overlay"},[r("div",{staticClass:"filter-options"},[r("div",{staticClass:"filter-header"}),r("div",{staticClass:"filter-content"},[r("a",{staticClass:"button button-close",attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.openFilter=!1}}},[t._v("Close")]),r("div",{staticClass:"option-group"},[r("div",{staticClass:"option-group-title"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.showUnknown,expression:"showUnknown"}],staticClass:"option-checkbox",attrs:{id:"chk-unknown",type:"checkbox"},domProps:{checked:Array.isArray(t.showUnknown)?t._i(t.showUnknown,null)>-1:t.showUnknown},on:{change:function(e){var n=t.showUnknown,r=e.target,o=!!r.checked;if(Array.isArray(n)){var a=null,i=t._i(n,a);r.checked?i<0&&(t.showUnknown=n.concat([a])):i>-1&&(t.showUnknown=n.slice(0,i).concat(n.slice(i+1)))}else t.showUnknown=o}}}),r("label",{staticClass:"showUnknown",attrs:{for:"chk-unknown"}}),r("label",{attrs:{for:"chk-unknown"}},[t._v("顯示無資料的角色")])])]),r("div",{staticClass:"option-group"},[r("div",{staticClass:"option-group-title"},[t._v("屬性")]),r("div",{staticClass:"option-group-content"},[t._l(t.types,function(e){return[r("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.type[e],expression:"filter.type[type]"}],staticClass:"option-checkbox",attrs:{id:"chk-type-"+e,type:"checkbox"},domProps:{checked:Array.isArray(t.filter.type[e])?t._i(t.filter.type[e],null)>-1:t.filter.type[e]},on:{input:function(n){t.filterHandler("type."+e,n.target)},change:function(n){var r=t.filter.type[e],o=n.target,a=!!o.checked;if(Array.isArray(r)){var i=null,c=t._i(r,i);o.checked?c<0&&t.$set(t.filter.type,e,r.concat([i])):c>-1&&t.$set(t.filter.type,e,r.slice(0,c).concat(r.slice(c+1)))}else t.$set(t.filter.type,e,a)}}}),r("label",{class:"type-"+e,attrs:{for:"chk-type-"+e}})]})],2)]),r("div",{staticClass:"option-group"},[r("div",{staticClass:"option-group-title"},[t._v("類型")]),r("div",{staticClass:"option-group-content"},[t._l(t.professions,function(e){return[r("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.profession[e],expression:"filter.profession[profession]"}],staticClass:"option-checkbox",attrs:{id:"chk-profession-"+e,type:"checkbox"},domProps:{checked:Array.isArray(t.filter.profession[e])?t._i(t.filter.profession[e],null)>-1:t.filter.profession[e]},on:{input:function(n){t.filterHandler("profession."+e,n.target)},change:function(n){var r=t.filter.profession[e],o=n.target,a=!!o.checked;if(Array.isArray(r)){var i=null,c=t._i(r,i);o.checked?c<0&&t.$set(t.filter.profession,e,r.concat([i])):c>-1&&t.$set(t.filter.profession,e,r.slice(0,c).concat(r.slice(c+1)))}else t.$set(t.filter.profession,e,a)}}}),r("label",{class:"profession-"+e,attrs:{for:"chk-profession-"+e}})]})],2)])])])]):t._e(),t.character?r("div",{staticClass:"overlay",on:{click:function(e){return e.target!==e.currentTarget?null:t.closeInformationHandler(e)}}},[r("skill-information",{attrs:{it:t.character}},[r("a",{staticClass:"button button-close",attrs:{href:"#close"},on:{click:function(e){return e.preventDefault(),t.closeInformationHandler(e)}}},[t._v("x")])])],1):t._e(),r("div",{class:["library-header",{blur:t.character||t.openFilter}]}),r("div",{class:["library-controls",{blur:t.character||t.openFilter}]},[r("div",{staticClass:"container"},[r("div",{staticClass:"group search",class:{focus:t.openSearch}},[r("label",{class:["search-name",{focus:t.openSearch}],on:{keydown:[function(e){if(!("button"in e)&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"]))return null;t.openSearch=!1},function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;t.openSearch=!1}]}},[r("img",{attrs:{src:n("dcca"),alt:"filter search"},on:{click:function(e){if(e.target!==e.currentTarget)return null;t.openSearch=!t.openSearch}}}),t.openSearch?r("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.name,expression:"filter.name"}],staticClass:"option-text",attrs:{maxlength:"10",type:"text",placeholder:"再按一次圖示可關閉。"},domProps:{value:t.filter.name},on:{input:[function(e){e.target.composing||t.$set(t.filter,"name",e.target.value)},function(e){t.filterHandler("name",e.target)}]}}):t._e(),t.openSearch?t._e():r("input",{attrs:{type:"text",placeholder:"再按一次圖示可關閉。"},domProps:{value:t.filter.name}})]),r("label",{staticClass:"button button-setting",on:{click:function(e){t.openFilter=!0,t.openSearch=!1}}},[r("img",{attrs:{src:n("85c9"),alt:"filter setup"}})])])])]),t.groupSize?r("div",{class:["container",{blur:t.character||t.openFilter}]},t._l(t.characterGroups,function(e,n){return e.length?r("div",{class:["group",n]},[r("div",{staticClass:"group-header"},[r("collection-info",{attrs:{stars:t.getGroupStars(n),counts:t.getCollectionCounts(e),total:e.length}})],1),r("div",{staticClass:"group-content"},t._l(e,function(e){return r("character-portrait",{key:e.icon,class:{"cursor-pointer":!!e.id},attrs:{it:e},nativeOn:{click:function(n){t.informationHandler(e.icon)},contextmenu:function(n){n.preventDefault(),t.editHandler(e.icon)}}},[r("div",{staticClass:"ch"},[t._v(t._s(e.name_CH))]),r("div",{staticClass:"jp"},[t._v("("+t._s(e.name_JP)+")")])])}),1)]):t._e()}),0):t._e()])},o=[],a=(n("6b54"),n("28a5"),n("456d"),n("ac6a"),n("a481"),n("7f7f"),n("cadf"),n("551c"),n("097d"),n("b621")),i=n("d049"),c=n("208a"),s="characterFilterSetting",l={name:"library",data:function(){return{openFilter:!1,openSearch:!1,showUnknown:!1,types:["fire","water","forest","light","dark"],professions:["attack","protect","support","confusion","medic"],filter:{}}},computed:{editable:function(){return this.$store.state.editorEnabled},groupSize:function(){return this.$store.state.groupConfig.character},filteredCharacters:function(){var t=this;return this.$store.state.characters.filter(function(e){var n=t.filter,r=n.name,o=n.type,a=n.profession;if(!r&&!o&&!a)return!0;var i=!0;return r&&(i=e.nickname.indexOf(r)>=0,i=i||e.name_CH.indexOf(r)>=0,i=i||e.name_JP.indexOf(r)>=0,i=i||e.name_KR.indexOf(r)>=0),e.type&&(i=i&&o[e.type]),e.profession&&(i=i&&a[e.profession]),i})},character:function(){var t=this.$route.params.icon,e=this.characterMap[t]||null;return this.characters.length&&(document.title=document.title.replace("{name}",e?e.name_JP:"")),this.lockWindow(!!e),e},characters:function(){return this.filteredCharacters},characterMap:function(){var t={};return this.characters.forEach(function(e){t[e.icon]=e}),t},characterGroups:function(){var t=this,e={},n=["water","fire","forest","light","dark","fire"];return Object.keys(this.groupSize).forEach(function(r){e[r]||(e[r]=[]);for(var o=1;o<=t.groupSize[r];o++){var a=r+"-"+t.numberToString(o,3),i=t.characterMap[a];t.showUnknown&&!i&&(i={icon:a},o<=6?(6===o?(i.name_CH="進化素材",i.name_JP="オロラミム"):(i.name_CH="強化素材",i.name_JP="アオラミム"),i.type=n[o-1],i.profession=""):i.type||(i.name_CH="無資料",i.name_JP="Unknown")),i&&e[r].push(i)}e[r]=e[r].reverse()}),e}},watch:{openFilter:function(){this.lockWindow(this.openFilter)}},created:function(){var t=this;this.$store.dispatch("APP_INIT"),this.types.forEach(function(e){t.filter.type={},t.types.forEach(function(e){t.filter.type[e]=!0}),t.filter.profession={},t.professions.forEach(function(e){t.filter.profession[e]=!0}),t.filter.name=""}),window.document.body.style="background-image: none;"},beforeMount:function(){this.showUnknown=this.editable},methods:{lockWindow:function(t){t?document.body.classList.add("locked"):document.body.classList.remove("locked")},numberToString:function(t,e){for(var n=t.toString().split(""),r=n.length;r<e;r++)n.unshift("0");return n.join("")},getGroupStars:function(t){var e=1;return/child-\d/.test(t)&&(e=1*t.replace(/child-/,"")),e},getCollectionCounts:function(t){var e=this,n=0;return t.forEach(function(t){e.showUnknown&&t.type?n++:!e.showUnknown&&t.id&&n++}),n},filterClone:function(){var t=this,e=this.filter,n=e.name,r=e.type,o=e.profession,a={};return a.name=n,this.types.forEach(function(e){a.type={},t.types.forEach(function(t){a.type[t]=r[t]}),a.profession={},t.professions.forEach(function(t){a.profession[t]=o[t]})}),a},filterHandler:function(t,e){var n=this.filterClone();if("name"===t)n[t]=e.value;else{var r=t.split(".");n[r[0]][r[1]]=e.checked}this.filter=n},informationHandler:function(t){var e=this.characterMap[t]||{};if(!e.id)return!1;this.$router.push({name:"Library-Reader",params:{icon:t}})},closeInformationHandler:function(){this.$router.push({name:"Library"})},editHandler:function(t){var e="character",n=this.characterMap[t];this.editable&&(n?this.$router.push({path:"/form/".concat(e,"/").concat(t)}):this.$router.push({path:"/form/".concat(e,"?icon=").concat(t)}))},saveFilterSetting:function(){localStorage.setItem(s,JSON.stringify(this.filter))}},beforeDestroy:function(){this.lockWindow(!1),window.document.body.style=""},components:{CharacterPortrait:a["a"],SkillInformation:i["a"],CollectionInfo:c["a"]}},f=l,u=(n("1cdf"),n("2877")),p=Object(u["a"])(f,r,o,!1,null,"62be977e",null);p.options.__file="index.vue";e["default"]=p.exports},"1cdf":function(t,e,n){"use strict";var r=n("7dc0"),o=n.n(r);o.a},"208a":function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"collection-info"},[t._l(t.stars,function(t){return n("span",{staticClass:"star"})}),n("div",{staticClass:"info"},[n("span",{staticClass:"counts"},[t._v(t._s(t.counts))]),n("span",{staticClass:"total"},[t._v(t._s(t.total))])])],2)},o=[],a=(n("c5f6"),n("cadf"),n("551c"),n("097d"),{name:"collection-info",props:{stars:{type:Number,required:!0,default:1},counts:{type:Number,required:!0,default:0},total:{type:Number,required:!0,default:0}}}),i=a,c=(n("6734"),n("2877")),s=Object(c["a"])(i,r,o,!1,null,"7510837e",null);s.options.__file="index.vue";e["a"]=s.exports},"52a7":function(t,e){e.f={}.propertyIsEnumerable},"5dbc":function(t,e,n){var r=n("d3f4"),o=n("8b97").set;t.exports=function(t,e,n){var a,i=e.constructor;return i!==n&&"function"==typeof i&&(a=i.prototype)!==n.prototype&&r(a)&&o&&o(t,a),t}},6734:function(t,e,n){"use strict";var r=n("704a"),o=n.n(r);o.a},"704a":function(t,e,n){},"7dc0":function(t,e,n){},"85c9":function(t,e,n){t.exports=n.p+"img/btn_home_config.9ce2d092.png"},"8b97":function(t,e,n){var r=n("d3f4"),o=n("cb7c"),a=function(t,e){if(o(t),!r(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,r){try{r=n("9b43")(Function.call,n("11e9").f(Object.prototype,"__proto__").set,2),r(t,[]),e=!(t instanceof Array)}catch(o){e=!0}return function(t,n){return a(t,n),e?t.__proto__=n:r(t,n),t}}({},!1):void 0),check:a}},9093:function(t,e,n){var r=n("ce10"),o=n("e11e").concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,o)}},aa77:function(t,e,n){var r=n("5ca1"),o=n("be13"),a=n("79e5"),i=n("fdef"),c="["+i+"]",s="​",l=RegExp("^"+c+c+"*"),f=RegExp(c+c+"*$"),u=function(t,e,n){var o={},c=a(function(){return!!i[t]()||s[t]()!=s}),l=o[t]=c?e(p):i[t];n&&(o[n]=l),r(r.P+r.F*c,"String",o)},p=u.trim=function(t,e){return t=String(o(t)),1&e&&(t=t.replace(l,"")),2&e&&(t=t.replace(f,"")),t};t.exports=u},c5f6:function(t,e,n){"use strict";var r=n("7726"),o=n("69a8"),a=n("2d95"),i=n("5dbc"),c=n("6a99"),s=n("79e5"),l=n("9093").f,f=n("11e9").f,u=n("86cc").f,p=n("aa77").trim,h="Number",d=r[h],y=d,g=d.prototype,b=a(n("2aeb")(g))==h,k="trim"in String.prototype,m=function(t){var e=c(t,!1);if("string"==typeof e&&e.length>2){e=k?e.trim():p(e,3);var n,r,o,a=e.charCodeAt(0);if(43===a||45===a){if(n=e.charCodeAt(2),88===n||120===n)return NaN}else if(48===a){switch(e.charCodeAt(1)){case 66:case 98:r=2,o=49;break;case 79:case 111:r=8,o=55;break;default:return+e}for(var i,s=e.slice(2),l=0,f=s.length;l<f;l++)if(i=s.charCodeAt(l),i<48||i>o)return NaN;return parseInt(s,r)}}return+e};if(!d(" 0o1")||!d("0b1")||d("+0x1")){d=function(t){var e=arguments.length<1?0:t,n=this;return n instanceof d&&(b?s(function(){g.valueOf.call(n)}):a(n)!=h)?i(new y(m(e)),n,d):m(e)};for(var v,w=n("9e1e")?l(y):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),C=0;w.length>C;C++)o(y,v=w[C])&&!o(d,v)&&u(d,v,f(y,v));d.prototype=g,g.constructor=d,n("2aba")(r,h,d)}},dcca:function(t,e,n){t.exports=n.p+"img/btn_search.11d58ffc.png"},fdef:function(t,e){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"}}]);
//# sourceMappingURL=chunk-307ce8e5.88136a4d.js.map