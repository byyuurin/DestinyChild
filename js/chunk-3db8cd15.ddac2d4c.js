(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3db8cd15"],{"15b4":function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"library"},[t.openFilter?r("div",{staticClass:"overlay"},[r("div",{staticClass:"filter-options"},[r("div",{staticClass:"filter-header"}),r("div",{staticClass:"filter-content"},[r("a",{staticClass:"button button-close",attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.openFilter=!1}}},[t._v("Close")]),r("div",{staticClass:"option-group"},[r("div",{staticClass:"option-group-title"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.showUnknown,expression:"showUnknown"}],staticClass:"option-checkbox",attrs:{id:"chk-unknown",type:"checkbox"},domProps:{checked:Array.isArray(t.showUnknown)?t._i(t.showUnknown,null)>-1:t.showUnknown},on:{change:function(e){var n=t.showUnknown,r=e.target,i=!!r.checked;if(Array.isArray(n)){var o=null,s=t._i(n,o);r.checked?s<0&&(t.showUnknown=n.concat([o])):s>-1&&(t.showUnknown=n.slice(0,s).concat(n.slice(s+1)))}else t.showUnknown=i}}}),r("label",{staticClass:"showUnknown",attrs:{for:"chk-unknown"}}),r("label",{attrs:{for:"chk-unknown"}},[t._v("顯示無資料的角色")])])]),r("div",{staticClass:"option-group"},[r("div",{staticClass:"option-group-title"},[t._v("屬性")]),r("div",{staticClass:"option-group-content"},[t._l(t.types,function(e){return[r("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.type[e],expression:"filter.type[type]"}],staticClass:"option-checkbox",attrs:{id:"chk-type-"+e,type:"checkbox"},domProps:{checked:Array.isArray(t.filter.type[e])?t._i(t.filter.type[e],null)>-1:t.filter.type[e]},on:{input:function(n){t.filterHandler("type."+e,n.target)},change:function(n){var r=t.filter.type[e],i=n.target,o=!!i.checked;if(Array.isArray(r)){var s=null,a=t._i(r,s);i.checked?a<0&&t.$set(t.filter.type,e,r.concat([s])):a>-1&&t.$set(t.filter.type,e,r.slice(0,a).concat(r.slice(a+1)))}else t.$set(t.filter.type,e,o)}}}),r("label",{class:"type-"+e,attrs:{for:"chk-type-"+e}})]})],2)]),r("div",{staticClass:"option-group"},[r("div",{staticClass:"option-group-title"},[t._v("類型")]),r("div",{staticClass:"option-group-content"},[t._l(t.professions,function(e){return[r("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.profession[e],expression:"filter.profession[profession]"}],staticClass:"option-checkbox",attrs:{id:"chk-profession-"+e,type:"checkbox"},domProps:{checked:Array.isArray(t.filter.profession[e])?t._i(t.filter.profession[e],null)>-1:t.filter.profession[e]},on:{input:function(n){t.filterHandler("profession."+e,n.target)},change:function(n){var r=t.filter.profession[e],i=n.target,o=!!i.checked;if(Array.isArray(r)){var s=null,a=t._i(r,s);i.checked?a<0&&t.$set(t.filter.profession,e,r.concat([s])):a>-1&&t.$set(t.filter.profession,e,r.slice(0,a).concat(r.slice(a+1)))}else t.$set(t.filter.profession,e,o)}}}),r("label",{class:"profession-"+e,attrs:{for:"chk-profession-"+e}})]})],2)])])])]):t._e(),t.character?r("div",{staticClass:"overlay",on:{click:function(e){return e.target!==e.currentTarget?null:t.closeInformationHandler(e)}}},[r("skill-information",{attrs:{it:t.character}},[r("a",{staticClass:"button button-close",attrs:{href:"#close"},on:{click:function(e){return e.preventDefault(),t.closeInformationHandler(e)}}},[t._v("x")])])],1):t._e(),r("div",{class:["library-header",{blur:t.character||t.openFilter}]}),r("div",{class:["library-controls",{blur:t.character||t.openFilter}]},[r("div",{staticClass:"container"},[r("div",{staticClass:"group search"},[r("label",{class:["search-name",{focus:t.openSearch}],on:{click:function(e){if(e.target!==e.currentTarget)return null;t.openSearch=!t.openSearch},keydown:[function(e){if(!("button"in e)&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"]))return null;t.openSearch=!1},function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;t.openSearch=!1}]}},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.name,expression:"filter.name"}],staticClass:"option-text",attrs:{maxlength:"10",type:"text",placeholder:"再按一次可關閉。"},domProps:{value:t.filter.name},on:{input:[function(e){e.target.composing||t.$set(t.filter,"name",e.target.value)},function(e){t.filterHandler("name",e.target)}]}})]),r("label",{staticClass:"button button-setting",on:{click:function(e){t.openFilter=!0}}},[r("img",{attrs:{src:n("85c9"),alt:"filter setup"}})])])])]),t.groupSize?r("div",{class:["container",{blur:t.character||t.openFilter}]},t._l(t.characterGroups,function(e,n){return e.length?r("div",{class:["group",n]},[r("div",{staticClass:"group-header"},[r("collection-info",{attrs:{stars:t.getGroupStars(n),counts:t.getCollectionCounts(e),total:e.length}})],1),r("div",{staticClass:"group-content"},t._l(e,function(e){return r("character-portrait",{key:e.icon,class:{"cursor-pointer":!!e.id},attrs:{it:e},nativeOn:{click:function(n){t.informationHandler(e.icon)}}},[r("div",{staticClass:"ch"},[t._v(t._s(e.name_CH))]),r("div",{staticClass:"jp"},[t._v("("+t._s(e.name_JP)+")")])])}),1)]):t._e()}),0):t._e()])},i=[],o=(n("a481"),n("6b54"),n("28a5"),n("456d"),n("ac6a"),n("7f7f"),n("cadf"),n("551c"),n("097d"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:["character-portrait",{disabled:!t.it.type}],attrs:{"data-hover":t.hasHoverEffect&&!!t.it.type}},[n("div",{class:["frame","type-"+t.it.type,"profession-"+t.it.profession]}),n("img",{attrs:{src:"./icon/portrait/"+t.it.icon+".png",alt:t.it.name_CH}}),n("div",{staticClass:"name"},[t._t("default")],2)])}),s=[],a={name:"character-portrait",props:{it:{type:Object,required:!0,default:function(){return{id:0,nickname:"",name_CH:"",name_JP:"",name_KR:"",icon:"",star:"",type:"",profession:"",recommended:"0",cooldown:"",LeaderSkill:"",BaseSkill:"",NormalSkill:"",SlideSkill:"",DriveSkill:"",createDate:"",createUser:null}}},hasHoverEffect:{type:Boolean,required:!1,default:!0}}},c=a,l=(n("5062"),n("2877")),f=Object(l["a"])(c,o,s,!1,null,"44170748",null);f.options.__file="index.vue";var u=f.exports,p=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"skill-information"},[t._t("default",[n("a",{staticClass:"button button-close",attrs:{href:"javascript:;"}},[t._v("close")])]),n("div",{staticClass:"profile"},[n("character-portrait",{attrs:{it:t.it,hasHoverEffect:!1}}),n("div",{staticClass:"names"},[n("div",{staticClass:"name"},[t._v(t._s(t.it.name_CH))]),n("div",{staticClass:"name"},[t._v(t._s(t.it.nickname))]),n("div",{staticClass:"name"},[t._v(t._s(t.it.name_JP))]),n("div",{staticClass:"name"},[t._v(t._s(t.it.name_KR))])])],1),n("div",{staticClass:"skills"},[n("p",{staticClass:"skill auto",attrs:{"data-title":"基本攻擊"},domProps:{innerHTML:t._s(t.numberHighlight(t.it.BaseSkill))}}),n("p",{staticClass:"skill tap",attrs:{"data-title":"NS"},domProps:{innerHTML:t._s(t.numberHighlight(t.it.NormalSkill))}}),n("p",{staticClass:"skill slide",attrs:{"data-title":"SS","data-cooldown":t.it.cooldown},domProps:{innerHTML:t._s(t.numberHighlight(t.it.SlideSkill))}}),n("p",{staticClass:"skill drive",attrs:{"data-title":"DS"},domProps:{innerHTML:t._s(t.numberHighlight(t.it.DriveSkill))}}),n("p",{staticClass:"skill leader",attrs:{"data-title":"隊長增益"},domProps:{innerHTML:t._s(t.numberHighlight(t.it.LeaderSkill))}})])],2)},d=[],h={name:"skill-information",props:{it:{type:Object,required:!0,default:function(){return{id:0,nickname:"",name_CH:"",name_JP:"",name_KR:"",avatar:"",star:"",type:"",profession:"",recommended:"0",cooldown:"",LeaderSkill:"",BaseSkill:"",NormalSkill:"",SlideSkill:"",DriveSkill:"",createDate:"",createUser:null}}}},components:{CharacterPortrait:u},methods:{numberHighlight:function(t){return t.replace(/[(+|\-)?\d.?\d(%)?]+/gi,function(t){return'<span class="highlight">'.concat(t,"</span>")})}}},k=h,m=(n("4d18"),Object(l["a"])(k,p,d,!1,null,"8c8b1908",null));m.options.__file="index.vue";var g=m.exports,y=n("208a"),v="characterFilterSetting",C={name:"library",data:function(){return{character:null,openFilter:!1,openSearch:!1,showUnknown:!1,types:["fire","water","forest","light","dark"],professions:["attack","protect","support","confusion","medic"],filter:{}}},computed:{groupSize:function(){return this.$store.state.groupConfig.character},filteredCharacters:function(){var t=this;return this.$store.state.characters.filter(function(e){var n=t.filter,r=n.name,i=n.type,o=n.profession,s=!0;return r&&(s=e.nickname.indexOf(r)>=0,s=s||e.name_CH.indexOf(r)>=0,s=s||e.name_JP.indexOf(r)>=0,s=s||e.name_KR.indexOf(r)>=0),e.type&&(s=s&&i[e.type]),e.profession&&(s=s&&o[e.profession]),s})},characters:function(){return this.filteredCharacters},characterMap:function(){var t={};return this.characters.forEach(function(e){t[e.icon]=e}),t},characterGroups:function(){var t=this,e={},n=["water","fire","forest","light","dark","fire"];return Object.keys(this.groupSize).forEach(function(r){e[r]||(e[r]=[]);for(var i=1;i<=t.groupSize[r];i++){var o=r+"-"+t.numberToString(i,3),s=t.characterMap[o];t.showUnknown&&!s&&(s={icon:o},i<=6?(6===i?(s.name_CH="進化素材",s.name_JP="オロラミム"):(s.name_CH="強化素材",s.name_JP="アオラミム"),s.type=n[i-1],s.profession=""):s.type||(s.name_CH="無資料",s.name_JP="Unknown")),s&&e[r].push(s)}e[r]=e[r].reverse()}),e}},watch:{openFilter:function(){this.lockWindow(this.openFilter)}},created:function(){var t=this;this.$store.dispatch("APP_INIT"),this.types.forEach(function(e){t.filter.type={},t.types.forEach(function(e){t.filter.type[e]=!0}),t.filter.profession={},t.professions.forEach(function(e){t.filter.profession[e]=!0}),t.filter.name=""}),window.document.body.style="background-image: none;"},methods:{lockWindow:function(t){t?document.body.classList.add("locked"):document.body.classList.remove("locked")},numberToString:function(t,e){for(var n=t.toString().split(""),r=n.length;r<e;r++)n.unshift("0");return n.join("")},getGroupStars:function(t){var e=1;return/child-\d/.test(t)&&(e=1*t.replace(/child-/,"")),e},getCollectionCounts:function(t){var e=this,n=0;return t.forEach(function(t){e.showUnknown&&t.type?n++:!e.showUnknown&&t.id&&n++}),n},filterClone:function(){var t=this,e=this.filter,n=e.name,r=e.type,i=e.profession,o={};return o.name=n,this.types.forEach(function(e){o.type={},t.types.forEach(function(t){o.type[t]=r[t]}),o.profession={},t.professions.forEach(function(t){o.profession[t]=i[t]})}),o},filterHandler:function(t,e){var n=this.filterClone();if("name"===t)n[t]=e.value;else{var r=t.split(".");n[r[0]][r[1]]=e.checked}this.filter=n},informationHandler:function(t){var e=this.characterMap[t]||null;e&&(this.character=e,this.lockWindow(!0))},closeInformationHandler:function(){this.character=null,this.lockWindow(!1)},saveFilterSetting:function(){localStorage.setItem(v,JSON.stringify(this.filter))}},beforeDestroy:function(){this.lockWindow(!1),window.document.body.style=""},components:{CharacterPortrait:u,SkillInformation:g,CollectionInfo:y["a"]}},b=C,w=(n("b35f"),Object(l["a"])(b,r,i,!1,null,"58a54d6e",null));w.options.__file="index.vue";e["default"]=w.exports},"40e6":function(t,e,n){},"4d18":function(t,e,n){"use strict";var r=n("c324"),i=n.n(r);i.a},5062:function(t,e,n){"use strict";var r=n("40e6"),i=n.n(r);i.a},"7f7f":function(t,e,n){var r=n("86cc").f,i=Function.prototype,o=/^\s*function ([^ (]*)/,s="name";s in i||n("9e1e")&&r(i,s,{configurable:!0,get:function(){try{return(""+this).match(o)[1]}catch(t){return""}}})},"85c9":function(t,e,n){t.exports=n.p+"img/btn_home_config.9ce2d092.png"},ab29:function(t,e,n){},b35f:function(t,e,n){"use strict";var r=n("ab29"),i=n.n(r);i.a},c324:function(t,e,n){}}]);
//# sourceMappingURL=chunk-3db8cd15.ddac2d4c.js.map